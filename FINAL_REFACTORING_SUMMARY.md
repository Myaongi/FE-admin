# ğŸ‰ ì „ì²´ API ë¦¬íŒ©í† ë§ ì™„ë£Œ ë³´ê³ ì„œ

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ë„ë©”ì¸ë³„ API íŒŒì¼ ìƒì„± ë° í™œìš©

#### ìƒì„±ëœ API íŒŒì¼
- **`/src/lib/posts-api.ts`** - ê²Œì‹œë¬¼ ê´€ë ¨ API
  - `getPosts()` - ê²Œì‹œë¬¼ ëª©ë¡ ì¡°íšŒ
  - `getPostDetail()` - ê²Œì‹œë¬¼ ìƒì„¸ ì¡°íšŒ
  - `deletePost()` - ê²Œì‹œë¬¼ ì‚­ì œ

- **`/src/lib/reports-api.ts`** - ì‹ ê³  ê´€ë ¨ API
  - `getReports()` - ì‹ ê³  ëª©ë¡ ì¡°íšŒ
  - `getReportDetail()` - ì‹ ê³  ìƒì„¸ ì¡°íšŒ
  - `ignoreReport()` - ì‹ ê³  ë¬´ì‹œ ì²˜ë¦¬
  - `deleteReportedPost()` - ì‹ ê³ ëœ ê²Œì‹œë¬¼ ì‚­ì œ

- **`/src/lib/members-api.ts`** - ì‚¬ìš©ì ê´€ë ¨ API
  - `getMembers()` - ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
  - `getMemberDetail()` - ì‚¬ìš©ì ìƒì„¸ ì¡°íšŒ
  - `updateMemberStatus()` - ì‚¬ìš©ì ìƒíƒœ ë³€ê²½
  - `deleteMember()` - ì‚¬ìš©ì ì‚­ì œ

### 2. í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

âœ… **`/src/app/admin/posts/page.tsx`**
- `getPosts()` ì‚¬ìš©
- `deletePost()` ì‚¬ìš©
- ì‚­ì œ í›„ ëª©ë¡ ìë™ ìƒˆë¡œê³ ì¹¨

âœ… **`/src/app/admin/reports/page.tsx`**
- `getReports()` ì‚¬ìš©
- `ignoreReport()` ì‚¬ìš©
- `deleteReportedPost()` ì‚¬ìš©
- ì²˜ë¦¬ í›„ ëª©ë¡ ìë™ ìƒˆë¡œê³ ì¹¨

âœ… **`/src/app/admin/members/page.tsx`**
- `getMembers()` ì‚¬ìš©
- `updateMemberStatus()` ì‚¬ìš©
- `deleteMember()` ì‚¬ìš©
- ì‘ì—… í›„ ëª©ë¡ ìë™ ìƒˆë¡œê³ ì¹¨

### 3. ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

âœ… **`/src/components/PostDetailModal.tsx`**
- `getPostDetail()` ì‚¬ìš©
- `deletePost()` ì‚¬ìš©
- `fetch` ì§ì ‘ í˜¸ì¶œ ì œê±°

âœ… **`/src/components/ReportDetailModal.tsx`**
- `getReportDetail()` ì‚¬ìš©
- `fetch` ì§ì ‘ í˜¸ì¶œ ì œê±°

âœ… **`/src/components/MembersDetailModal.tsx`**
- `getMemberDetail()` ì‚¬ìš©
- `fetch` ì§ì ‘ í˜¸ì¶œ ì œê±°

### 4. Next.js API Route ìˆ˜ì •

âœ… **`/src/app/api/admin/posts/[type]/[id]/route.ts`**
- `getPostDetail()` ì‚¬ìš©
- axios ì§ì ‘ í˜¸ì¶œ ì œê±°
- ì¼ê´€ëœ API êµ¬ì¡° ì ìš©

## ğŸ“Š ë¦¬íŒ©í† ë§ ì „í›„ ë¹„êµ

### Before (ë¬¸ì œì )
```typescript
// ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ fetch ì§ì ‘ í˜¸ì¶œ
const response = await fetch(url, {
  method: "GET",
  headers: {
    Authorization: `Bearer ${accessToken}`,
    "Content-Type": "application/json",
  },
});
```

**ë¬¸ì œì :**
- ì¤‘ë³µ ì½”ë“œ ë§ìŒ
- í† í° ê´€ë¦¬ ì¼ê´€ì„± ì—†ìŒ
- ì—ëŸ¬ ì²˜ë¦¬ ì œê°ê°
- ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

### After (ê°œì„ )
```typescript
// ë„ë©”ì¸ë³„ API í•¨ìˆ˜ ì‚¬ìš©
const response = await getPosts({ type: "ALL", page: 0, size: 20 });
```

**ê°œì„ ì :**
- âœ… ì½”ë“œ ì¤‘ë³µ ì œê±°
- âœ… í† í° ìë™ ê´€ë¦¬
- âœ… ì¼ê´€ëœ ì—ëŸ¬ ì²˜ë¦¬
- âœ… íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´

## ğŸ¯ ì•„í‚¤í…ì²˜ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Page Components                  â”‚
â”‚  (posts/page, reports/page, members/page)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Modal Components                    â”‚
â”‚  (PostDetailModal, ReportDetailModal,    â”‚
â”‚   MembersDetailModal)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Domain API Functions                â”‚
â”‚  (posts-api, reports-api, members-api)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         axios instance                   â”‚
â”‚         (api-client.ts)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Next.js API Routes                  â”‚
â”‚      (/api/admin/...)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      External Backend API                â”‚
â”‚   (http://54.180.54.51:8080)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ì£¼ìš” ê°œì„ ì‚¬í•­

### 1. ì¼ê´€ëœ API í˜¸ì¶œ
- ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ API í•¨ìˆ˜ ì‚¬ìš©
- ì¤‘ë³µ ì½”ë“œ ì œê±°
- ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

### 2. ìë™ í† í° ê´€ë¦¬
```typescript
// API í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìë™ìœ¼ë¡œ í† í° ì¶”ê°€
const token = typeof window !== "undefined" 
  ? localStorage.getItem("accessToken") 
  : null;

const response = await apiClient.get(url, {
  headers: token ? { Authorization: `Bearer ${token}` } : {},
});
```

### 3. íƒ€ì… ì•ˆì •ì„±
```typescript
export interface ApiResponse<T = any> {
  isSuccess: boolean;
  code?: string;
  message?: string;
  result?: T;
  error?: string;
}
```

### 4. ì¼ê´€ëœ ì—ëŸ¬ ì²˜ë¦¬
```typescript
catch (err: any) {
  console.error("API ì˜¤ë¥˜:", err);
  setError(
    err.response?.data?.message ||
    err.message ||
    "ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
  );
}
```

## ğŸ“ˆ ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

### API íŒŒì¼ (ì‹ ê·œ ìƒì„±)
- âœ… `/src/lib/posts-api.ts`
- âœ… `/src/lib/reports-api.ts`
- âœ… `/src/lib/members-api.ts`

### í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ (ìˆ˜ì •)
- âœ… `/src/app/admin/posts/page.tsx`
- âœ… `/src/app/admin/reports/page.tsx`
- âœ… `/src/app/admin/members/page.tsx`

### ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ (ìˆ˜ì •)
- âœ… `/src/components/PostDetailModal.tsx`
- âœ… `/src/components/ReportDetailModal.tsx`
- âœ… `/src/components/MembersDetailModal.tsx`

### API Route (ìˆ˜ì •)
- âœ… `/src/app/api/admin/posts/[type]/[id]/route.ts`

## ğŸ‰ ìµœì¢… ê²°ê³¼

### âœ… ëª¨ë“  ë¦°í„° ì˜¤ë¥˜ í•´ê²°
- TypeScript íƒ€ì… ì˜¤ë¥˜ 0ê°œ
- ESLint ì˜¤ë¥˜ 0ê°œ

### âœ… ì½”ë“œ í’ˆì§ˆ í–¥ìƒ
- ì¤‘ë³µ ì½”ë“œ ì œê±°
- ì¼ê´€ëœ êµ¬ì¡°
- ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬

### âœ… ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ë„ë©”ì¸ë³„ API í•¨ìˆ˜ë¡œ ê´€ë¦¬
- ìˆ˜ì • ì‹œ í•œ ê³³ë§Œ ë³€ê²½í•˜ë©´ ë¨
- í…ŒìŠ¤íŠ¸ ì‘ì„± ìš©ì´

### âœ… ê°œë°œì ê²½í—˜ í–¥ìƒ
- íƒ€ì… ìë™ ì™„ì„±
- ëª…í™•í•œ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜
- ì¼ê´€ëœ ì—ëŸ¬ ì²˜ë¦¬

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

1. **API ì‘ë‹µ ìºì‹±**
   - React Query ë˜ëŠ” SWR ë„ì… ê³ ë ¤
   - ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ê°ì†Œ

2. **ë‚™ê´€ì  ì—…ë°ì´íŠ¸ (Optimistic Update)**
   - UI ì¦‰ì‹œ ì—…ë°ì´íŠ¸
   - ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ

3. **ì—ëŸ¬ ë°”ìš´ë”ë¦¬**
   - ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬
   - ì‚¬ìš©ì ì¹œí™”ì ì¸ ì—ëŸ¬ í™”ë©´

4. **ë¡œë”© ìƒíƒœ ê°œì„ **
   - Skeleton UI
   - ë” ë‚˜ì€ ë¡œë”© ì¸ë””ì¼€ì´í„°

## ğŸ“ ê²°ë¡ 

ì „ì²´ í”„ë¡œì íŠ¸ì—ì„œ `fetch` ì§ì ‘ í˜¸ì¶œì„ ì œê±°í•˜ê³ , ë„ë©”ì¸ë³„ API í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë¦¬íŒ©í† ë§ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ì„±ê³¼:**
- âœ… ì½”ë“œ ì¤‘ë³µ ì œê±°
- âœ… ì¼ê´€ëœ API í˜¸ì¶œ êµ¬ì¡°
- âœ… íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- âœ… ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- âœ… ê°œë°œì ê²½í—˜ í–¥ìƒ

ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•˜ë©°, ì½”ë“œ í’ˆì§ˆì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰

